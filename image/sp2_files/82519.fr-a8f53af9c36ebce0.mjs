(self.modernJsonp=self.modernJsonp||[]).push([["82519"],{446891:function(e,t,i){i.d(t,{Z:()=>d});var s=i(281098),o=i(667294),a=i(20256),r=i(845421),n=i(169053),l=i(785893);function d({handleTogglePinSelection:e,index:t,isSelected:i,pin:d,surface:c,unselectedState:_="deselected-image-only"}){(0,o.useEffect)(()=>{(0,s.Z)("SelectablePin","/app/common/react/components/BoardNotes/Composer/SelectablePin.tsx")},[]);let[u,h]=(0,o.useState)(i),g=(0,n.S6)()(d.id);return(0,l.jsx)(a.iP,{onTap:()=>{h(!u),e(d,!i)},rounding:4,children:(0,l.jsx)(r.r,{attributionOption:"hide",blockClickEvents:!0,pinId:d.id,pinImageCrop:"none",pinKey:{type:"Legacy",data:g??d},saveButtonOptions:{type:"none"},selectionState:i?"selected-image-only":_,slotIndex:t,surface:c})})}},437175:function(e,t,i){i.d(t,{Z:()=>z});var s=i(281098),o=i(667294),a=i(20256),r=i(446891),n=i(980787),l=i(982166),d=i(19585),c=i(581722),_=i(312048),u=i(657043),h=i(475498),g=i(302148),p=i(675973),b=i(886981),m=i(87853),x=i(964577),f=i(215710),y=i(785893);function v({isFirstBoardCreation:e,isOnSelectStep:t,onClickBackButton:i,onDismiss:r,selectedPinCount:n}){(0,o.useEffect)(()=>{(0,s.Z)("BoardlessPinsModalHeading","/app/www/profile/ProfileBoards/BoardlessPins/BoardlessPinsModalHeading.tsx")},[]);let l=(0,d.Z)(),c=l.bt("Organiser en tableau", "Organize into a board", "boardlessPins.modalHeading.organizeHeading", undefined, true),_=n>0?(0,g.nk)(l.nbt(["{{ pinCount }} sélectionnée", "{{ pinCount }} sélectionnée(s)"], n, "boardlessPins.modalHeading.PinCountHeading", true),{pinCount:n}):c,u=l.bt("Créer un tableau", "Create board", "boardlessPins.modalHeading.createBoardHeading", undefined, true);return(0,y.jsxs)(a.xu,{alignItems:"center",display:"flex",justifyContent:"between",paddingX:4,paddingY:8,position:"relative",children:[e||t?(0,y.jsx)(a.xu,{height:40,width:40}):(0,y.jsx)(a.hU,{accessibilityLabel:l.bt("Revenir au modal précédent", "Go back to previous modal", "boardlessPins.modalHeading.arrowBackIconButton", undefined, true),disabled:t,icon:"arrow-back",iconColor:t?"white":"darkGray",onClick:i,size:"md"}),(0,y.jsx)(a.xu,{maxWidth:486,children:(0,y.jsx)(a.X6,{align:"center",size:"600",children:t?_:u})}),(0,y.jsx)(a.hU,{accessibilityLabel:l.bt("Annuler les changements", "Cancel changes", "boardlessPins.modalHeading.cancelIconButton", undefined, true),icon:"cancel",iconColor:"darkGray",onClick:r,size:"md"})]})}var w=i(964293),P=i(189976),B=i(831786),S=i(696323),j=i(890774);function A({boardlessPinsBoardId:e,hasBoards:t,isOnSelectStep:i,onDismiss:r,selectedPins:n,updateCurrentStep:A,userId:C,isFirstBoardCreation:z=!1,onComplete:I}){(0,o.useEffect)(()=>{(0,s.Z)("BoardlessPinsBoardPicker","/app/www/profile/ProfileBoards/BoardlessPins/BoardlessPinsBoardPicker.tsx")},[]);let k=(0,d.Z)(),T=(0,j.Z)(),[E,Z]=(0,o.useState)(!1),[L,R]=(0,o.useState)(""),[F,O]=(0,o.useState)(""),[N,D]=(0,o.useState)(!t),{checkExperiment:H}=(0,p.Z)(),M=(0,b.Z)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker"}}),U=(0,c.I0)(),J=(0,_.s0)(),W=(0,m.dI)(),X=n[0],$=n.map(e=>e.image).filter(e=>!!e),q=(t,i)=>{let s=n.map(e=>e.id);U((0,B.Z)({selectedPinIds:s,source:{boardId:e,sectionId:null},target:{boardId:t,sectionId:i||null}},k)),U((0,P.EX)({feedId:C,feedType:S.Z.BOARDLESS_PINS,itemIds:s,itemType:"pin"}))},Y=async()=>{try{let e=await T({boardCreateOptions:{name:F,privacy:E?"secret":"public",aux_data:{source:"organize_pins"}}});if(await q(e.id),r(),z&&H("ap_dweb_first_board_creation",{dangerouslySkipActivation:!0}).group.includes("genie")){W.showToast(({hideToast:t})=>(0,y.jsx)(h.Z,{duration:3e3,imageUrl:n[0]?.image?.url??"",onHide:t,text:(0,y.jsx)(a.xv,{overflow:"normal",size:"200",children:(0,g.XB)({text:k.bt("Enregistré dans <a id=\"1\">{{ boardName }}</a>", "Saved to <a id=\"1\">{{ boardName }}</a>", "BoardlessPinsBoardPicker.SavedToBoardToast.Message", undefined, true),markers:{boardName:e.name??""},jsxReplacements:{1:({innerHtmlStrings:t})=>(0,y.jsx)(a.rU,{display:"block",href:e.url??"",children:(0,y.jsx)(a.xv,{lineClamp:1,size:"200",weight:"bold",children:t},"PostSavedPinToastBoardName")})}})}),thumbnail:{icon:(0,y.jsx)(a.JO,{accessibilityLabel:k.bt("Enregistré(e) dans la miniature du profil", "Saved to profile thumbnail", "BoardlessPinsBoardPicker.thumbnail.accessibilityLabel", undefined, true),color:"default",icon:"history",size:24})}}));let t=n.map(e=>e.id);I?.(t[0]??"")}else W.showToast(({hideToast:e})=>(0,y.jsx)(h.Z,{onHide:e,text:k.bt("Tableau créé !", "Board created!", "BoardlessPinsBoardPicker.boardCreated.toast", undefined, true)})),e.url&&J(e.url,{replace:!0})}catch(t){let e=k.bt("Désolé… Un problème s’est produit.", "Uh oh! Something went wrong.", "BoardlessPinsBoardPicker.boardCreate.submitErrorDefault", undefined, true);if("string"==typeof t)e=t;else{let i=(0,u.Z)(t,"message");if(i){let s=(0,u.Z)(t,"message_detail");e=s?`${i} ${s}`:i}}R(e)}},K=(0,y.jsxs)(a.xu,{alignItems:"center",display:"flex",justifyContent:"between",paddingX:4,paddingY:5,position:"relative",children:[(0,y.jsx)(a.hU,{accessibilityLabel:k.bt("Retour", "Go back", "BoardlessPinsBoardPicker.modalHeading.arrowBackIconButton", undefined, true),disabled:i,icon:"arrow-back",iconColor:i?"white":"darkGray",onClick:()=>A("SELECT_PINS"),size:"md"}),(0,y.jsx)(a.X6,{align:"center",size:"600",children:k.bt("Déplacer vers le tableau", "Move to a board", "BoardlessPinsBoardPicker.save.modalTitle", undefined, true)}),(0,y.jsx)(a.hU,{accessibilityLabel:k.bt("Annuler les changements", "Cancel changes", "BoardlessPinsBoardPicker.modalHeading.cancelIconButton", undefined, true),icon:"cancel",iconColor:"darkGray",onClick:r,size:"md"})]});return N?(0,y.jsx)(l.ZP,{accessibilityModalLabel:k.bt("Créer un tableau", "Create board", "BoardlessPinsBoardPicker.createBoard.accessibilityLabel", undefined, true),footer:(0,y.jsx)(a.kC,{justifyContent:"end",children:(0,y.jsx)(a.zx,{color:"red",disabled:0===F.trim().length,onClick:()=>{Y()},size:"lg",text:k.bt("Créer", "Create", "BoardlessPinsBoardPicker.boardCreate.createButton", undefined, true)})}),heading:(0,y.jsx)(v,{isOnSelectStep:!1,onClickBackButton:()=>{A(t?"PICK_BOARD":"SELECT_PINS"),D(!1)},onDismiss:r,selectedPinCount:n.length}),onDismiss:r,size:"md",children:(0,y.jsx)(a.xu,{height:644,children:(0,y.jsx)(w.Z,{boardThumbs:$,isSecret:E,name:F,onNameChange:({value:e})=>{e.trim()?R(""):R(k.bt("N’oubliez pas de nommer votre tableau !", "Don't forget to name your board!", " - ", undefined, true)),O(e)},onVisibilityChange:({checked:e})=>Z(e),submitError:L})})}):(0,y.jsx)(l.ZP,{accessibilityModalLabel:k.bt("Déplacer vers le tableau", "Move to a board", "BoardlessPinsBoardPicker.chooseExistingBoardsModal.accessibilityLabel", undefined, true),heading:K,onDismiss:r,size:"md",children:(0,y.jsx)(a.xu,{padding:1,children:(0,y.jsx)(f.xH,{boardResource:M,changeBoardModal:!0,onBoardCreate:({title:e=""}={})=>{O(e),D(!0)},onItemChosen:e=>{q(e.boardId,e.sectionId),W.showToast(({hideToast:t})=>(0,y.jsx)(h.Z,{onHide:t,text:(0,g.nk)(k.bt("Déplacée(s) vers {{boardName}}", "Moved to {{boardName}}", "BoardlessPinsBoardPicker.onItemChosen.toast", undefined, true),{boardName:e.title}).join("")})),r()},paneHeight:644,paneWidth:720,pinId:X.id,surface:x.Z.ORGANIZE_PINS})})})}var C=i(169053);function z({boardlessPinsNormalized:e,fetchMore:t,hasBoards:i,isFirstBoardCreation:c=!1,onDismiss:_,userId:u,onComplete:h}){(0,o.useEffect)(()=>{(0,s.Z)("BoardlessPinsOrganizeModal","/app/common/react/components/profile/ProfileBoards/BoardlessPins/BoardlessPinsOrganizeModal.tsx")},[]);let g=(0,d.Z)(),p=(0,o.useRef)(null),[b,m]=(0,o.useState)([]),[x,f]=(0,o.useState)("SELECT_PINS"),{logContextEvent:w}=(0,n.u)(),P=(0,C.JC)(),B=(0,o.useMemo)(()=>e&&P?e.reduce((e,t)=>{let i=P[t.id];return e.push(i),e},[]):[],[e,P]);(0,o.useEffect)(()=>{c&&B.length&&m(B.reduce((e,t)=>(t&&e.push({id:t.id,image:c?t.images?.["236x"]??null:t.images?.["170x"]??null}),e),[]))},[B,c]);let S=B[0]?.board?.id??"",j=(e,t)=>{let i,s=[...b];t?(c&&w({event_type:101,view_type:740,view_parameter:4166,element:18124,object_id_str:e.id,aux_data:{selected:!0}}),i=s.concat({id:e.id,image:c?e.images?.["236x"]:e.images?.["170x"]})):(c&&w({event_type:101,view_type:740,view_parameter:4166,element:18124,object_id_str:e.id,aux_data:{selected:!1}}),i=s.filter(t=>t.id!==e.id)),m(i)};(0,o.useEffect)(()=>{c&&("SELECT_PINS"===x?w({event_type:13,view_type:740,view_parameter:4166}):"PICK_BOARD"===x&&w({event_type:13,view_type:740,view_parameter:4167}))},[x,c,w]);let z="SELECT_PINS"===x;return(0,y.jsx)(o.Fragment,{children:z?(0,y.jsx)(l.ZP,{accessibilityModalLabel:g.bt("Organiser en tableau", "Organize into a board", "boardlessPins.organizeModal.accessibilityLabel", undefined, true),footer:(0,y.jsx)(a.kC,{justifyContent:"end",children:(0,y.jsx)(a.zx,{color:"red",disabled:0===b.length,onClick:()=>{c&&w({event_type:101,view_type:740,view_parameter:4166,element:96}),f("PICK_BOARD")},size:"lg",text:g.bt("Suivant", "Next", "boardlessPins.organizeModal.nextButton", undefined, true)})}),heading:(0,y.jsx)(v,{isFirstBoardCreation:c,isOnSelectStep:z,onClickBackButton:()=>f("SELECT_PINS"),onDismiss:_,selectedPinCount:b.length}),onDismiss:()=>{c&&w({event_type:17476,view_type:740,view_parameter:4166}),_()},size:"md",children:(0,y.jsx)(a.xu,{ref:p,height:428,children:B&&p&&(0,y.jsx)(a.Rk,{columnWidth:152,gutterWidth:16,items:B,loadItems:t,renderItem:({data:e,itemIdx:t})=>(0,y.jsx)(r.Z,{handleTogglePinSelection:j,index:t,isSelected:!!b.filter(t=>t.id===e.id).length,pin:e,surface:"SelectableBoardlessPin",unselectedState:"no-selection"}),scrollContainer:()=>p.current})})}):(0,y.jsx)(A,{boardlessPinsBoardId:S,hasBoards:i,isFirstBoardCreation:c,isOnSelectStep:z,onComplete:h,onDismiss:()=>{c&&w({event_type:17476,view_type:740,view_parameter:4167}),_()},selectedPins:b,updateCurrentStep:e=>f(e),userId:u})})}},886442:function(e,t,i){i.d(t,{Z:()=>B});var s=i(281098),o=i(667294),a=i(581722),r=i(312048),n=i(376030),l=i(437175),d=i(20256),c=i(461951),_=i(821342),u=i(19585),h=i(302148),g=i(298097),p=i(979922),b=i(785893);function m({boardlessPins:e,displayFBCModalContent:t,handleClick:i,imageUrl:a,inFBCExperiment:r,pinRef:n,smallPinRep1:l,smallPinRep2:m,title:x,updateStep:f,onDismiss:y}){(0,o.useEffect)(()=>{(0,s.Z)("FBCUpsellIntroStep","/app/common/react/components/save/QuickSave/FBCUpsellIntroStep.tsx")},[]);let v=(0,u.Z)(),w=(0,_.Z)(),P=w.isAuth?w.username:null,B=v.bt("Enregistrez-le, triez-le, trouvez-le", "Save it, sort it, find it", "fbc.modal.title", undefined, true),S=v.bt("Les tableaux vous permettent de recueillir et d’organiser vos idées préférées afin de retrouver votre inspiration.", "Boards let you collect and organize your favorite ideas so you can get back to what inspires you.", "fbc.modal.subtitle", undefined, true),j=v.bt("Créer un tableau", "Create board", "fbc.modal.button.text", undefined, true),A=P?(0,h.Wc)(v.bt("La vibe de @{{ username }} !", "@{{ username }}'s Vibe!", "fbc.modal.board.title", undefined, true),{username:P.charAt(0).toUpperCase()+P.slice(1)}):null;return r?(0,b.jsx)(d.kC,{alignItems:"center",direction:"column",height:594,justifyContent:"start",width:"540",children:t?(0,b.jsxs)(o.Fragment,{children:[(0,b.jsx)(d.xu,{marginEnd:2,marginTop:2,padding:2,position:"absolute",right:!0,top:!0,children:(0,b.jsx)(d.hU,{accessibilityLabel:"Dismiss modal",icon:"cancel",iconColor:"darkGray",onClick:y,size:"lg"})}),(0,b.jsx)(d.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:c.jc_}},display:"flex",flex:"grow",justifyContent:"center",width:"100%",children:(0,b.jsxs)(d.xu,{alignItems:"start",color:"default",direction:"column",display:"flex",justifyContent:"center",padding:6,rounding:4,width:369,children:[(0,b.jsx)(g.Z,{images:e}),A&&(0,b.jsx)(d.xu,{marginTop:1,paddingX:1,width:"100%",children:(0,b.jsx)(d.xv,{children:A})})]})}),(0,b.jsx)(d.kC,{justifyContent:"center",width:"100%",children:(0,b.jsxs)(d.xu,{alignItems:"center",direction:"column",display:"flex",paddingY:5,width:458,children:[(0,b.jsx)(d.X6,{align:"center",size:"600",children:B}),(0,b.jsx)(d.xu,{marginTop:2,width:"100%",children:(0,b.jsx)(d.xv,{align:"center",children:S})}),(0,b.jsx)(d.xu,{display:"flex",justifyContent:"center",marginTop:4,paddingX:6,width:"100%",children:(0,b.jsx)(d.zx,{color:"red",fullWidth:!0,onClick:f,size:"lg",text:j})})]})})]}):(0,b.jsx)(d.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:(0,b.jsx)(d.xH,{show:!0})})}):(0,b.jsxs)(d.iP,{onTap:i,rounding:8,children:[(0,b.jsx)(d.xu,{alignItems:"center","data-test-id":"content-wrapper",display:"flex",justifyContent:"center",marginTop:8,minHeight:p.mE,children:(0,b.jsxs)(d.xu,{display:"flex",justifyContent:"between",overflow:"hidden",rounding:4,children:[(0,b.jsx)(d.xu,{ref:n,height:p.mE,width:p.Kp,children:a&&(0,b.jsx)(d.Ee,{alt:x||"",fit:"cover",naturalHeight:1,naturalWidth:1,src:a})}),(0,b.jsxs)(d.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",children:[(0,b.jsx)(d.xu,{ref:l,color:"secondary",height:p.mE/2}),(0,b.jsx)(d.xu,{ref:m,color:"secondary",height:p.mE/2})]})]})}),(0,b.jsx)(d.xu,{padding:8,children:(0,b.jsx)(d.X6,{align:"center",size:"600",children:v.bt("Organisez vos idées en créant un tableau", "Keep your ideas organized by creating a board", "quickSave.eduToast.heading", undefined, true)})})]})}var x=i(980787),f=i(982166),y=i(886981),v=i(341742),w=i(310916),P=i(169053);function B({boardId:e,boardUrl:t,onHide:i,imageUrl:d,title:c,toastDuration:h,firstBoardCreationExperimentEnabled:g=!1,onComplete:B}){(0,o.useEffect)(()=>{(0,s.Z)("QuickSaveBoardCreateEdu","/app/common/react/components/save/QuickSave/QuickSaveBoardCreateEdu.tsx")},[]);let{logContextEvent:S}=(0,x.u)(),j=(0,u.Z)(),A=(0,r.s0)(),C=(0,o.useRef)(null),z=(0,o.useRef)(null),I=(0,o.useRef)(null),[k,T]=(0,o.useState)("INTRO_STEP"),E=(0,_.Z)(),Z=E.isAuth?E.id:"",L=(0,a.v9)(({feeds:e})=>e[`boardless-pins:${E.isAuth?E.id:""}`])||[],R=(0,P.JC)(),{boardlessPinsEnabled:F}=(0,w.Xt)(Z),O=(0,y.Z)(g&&F&&Z?{name:"BoardlessPinsResource",options:{redux_normalize_feed:!0,userId:Z}}:null),N=!!L&&L.reduce((e,t)=>{let i=R[t.id];return e.push({name:i?.description,url:i?.images?.["236x"]?.url}),e},[])||[],D=(L||[]).length>0&&O?.data;(0,v.Z)(()=>{g&&S({event_type:13,view_type:740,view_parameter:4165})}),(0,o.useEffect)(()=>{S({event_type:9311,element:11934,object_id_str:e}),setTimeout(()=>(()=>{let e=C.current,t=z.current,i=I.current;e&&t&&i&&((0,n.Z)({targets:e,height:[p.Kp+2],duration:600,delay:1e3,easing:"linear"}),(0,n.Z)({targets:[t,i],width:[0,p.Kp/2],height:[p.Kp/2],marginLeft:[2],delay:1e3,duration:600,easing:"linear"}))})(),100);let t=setTimeout(()=>{g||i()},h);return()=>clearTimeout(t)},[]);let H=()=>n.Z.remove([C.current,z.current,I.current]),M=()=>{S({event_type:9313,element:11934,object_id_str:e}),g&&S({event_type:17476,view_type:740,view_parameter:4165}),H(),i()};return(0,b.jsxs)(o.Fragment,{children:["INTRO_STEP"===k&&(0,b.jsx)(f.ZP,{accessibilityModalLabel:j.bt("Organisez vos idées en créant un tableau", "Keep your ideas organized by creating a board", "quickSave.eduToast.modalAccessibilityLabel", undefined, true),onDismiss:M,children:(0,b.jsx)(m,{boardlessPins:N,displayFBCModalContent:!!D,handleClick:()=>{S({event_type:9312,element:11934,object_id_str:e}),H(),i(),A(t)},imageUrl:d,inFBCExperiment:g,onDismiss:M,pinRef:C,smallPinRep1:z,smallPinRep2:I,title:c,updateStep:()=>{T("BOARD_CREATE_STEP"),S({event_type:101,view_type:740,view_parameter:4165,element:96})}})}),g&&"BOARD_CREATE_STEP"===k&&L.length>0&&(0,b.jsx)(l.Z,{boardlessPinsNormalized:L,fetchMore:()=>{},hasBoards:!1,isFirstBoardCreation:g,onComplete:B,onDismiss:i,userId:E.isAuth?E.id:""})]})}},10594:function(e,t,i){i.d(t,{Z:()=>s});let s=e=>({isAnalyticsSite:4===e,isSterlingSite:3===e,isWwwSite:0===e,isTrendsSite:7===e,isPlanningHub:12===e})},684148:function(e,t,i){i.d(t,{Z:()=>s});let s=2},968842:function(e,t,i){i.d(t,{Z:()=>a});var s=i(647709),o=i(183152);function a(){return function({deviceType:e,site:t}){switch(t){case"analytics":return 4;case"business":return 6;case"planninghub-internal":return 12;case"sterling":return 3;case"trends":return 7;case"trends-internal":return 8;case"commerce-app":case"commerce-app-latest":case"pintergration":return 10;case"creators":case"create":return 11;case"newsroom":return 13;case"about":return 14;case"pinnacle-internal":return 17;default:return+("phone"===e||"tablet"===e)}}({deviceType:(0,s.ZP)(),site:(0,o.uo)()})}},742723:function(e,t,i){i.d(t,{Z:()=>c,l:()=>d});var s=i(667294),o=i(10594),a=i(15667),r=i(968842),n=i(821651),l=i(448505);let d=(0,s.createContext)(void 0),c=function(){let{advertiser:e}=(0,a.B)(),t=function(){let{isSterlingSite:e}=(0,o.Z)((0,r.Z)());return(0,s.useContext)(d)??e}(),i=(0,l.Z)(),c=((0,n.W)()?.profiles||[]).find(t=>t?.id===e?.owner_user_id);return t&&c||i}},964577:function(e,t,i){i.d(t,{Z:()=>s});let s={BOARD_PICKER:"board_picker",ORGANIZE_PINS:"organize_pins",PROFILE:"profile",PIN_CLUSTER:"create_pin_cluster_page"}},443962:function(e,t,i){i.d(t,{j:()=>a});let s={á:"a",à:"a",â:"a",ä:"a",ã:"a",å:"a",æ:"a",ç:"c",é:"e",è:"e",ê:"e",ë:"e",í:"i",ì:"i",î:"i",ï:"i",ñ:"n",ó:"o",ò:"o",ô:"o",ö:"o",õ:"o",ø:"o",œ:"o",ß:"s",ú:"u",ù:"u",û:"u",ü:"u"},o=e=>{if(!e)return"";let t="";for(let i=0;i<e.length;i+=1)t+=s[e.charAt(i)]||e.charAt(i);return t},a=(e,t,i="name")=>{let s=t.toLowerCase();return e.filter(e=>((e,t)=>{let i=t.split(" "),s=e.split(" "),a=0;for(let e=0;e<s.length;e+=1)(o(s[e]).includes(i[a])||s[e].includes(i[a]))&&(a+=1);return a===i.length})(e[i].toLowerCase(),s))}},968927:function(e,t,i){i.d(t,{Z:()=>l});var s=i(281098),o=i(667294),a=i(20256),r=i(19585),n=i(785893);function l(){(0,o.useEffect)(()=>{(0,s.Z)("SecretBoardIcon","/app/www/board/SecretBoardIcon.tsx")},[]);let e=(0,r.Z)();return(0,n.jsx)(a.JO,{accessibilityLabel:e.bt("Tableau secret", "Secret board", "Accessibility label for icon indicating a secret board", undefined, true),color:"default",icon:"lock",inline:!0})}},215710:function(e,t,i){i.d(t,{DR:()=>G,MD:()=>$,sR:()=>V,uC:()=>Q,xH:()=>ee});var s=i(281098),o=i(667294),a=i(581722),r=i(172045),n=i(20256),l=i(980787),d=i(686319),c=i(821342),_=i(19585),u=i(369416),h=i(302148),g=i(675973),p=i(15667),b=i(72918),m=i(886981),x=i(684148),f=i(742723),y=i(7872),v=i(964577),w=i(790427),P=i(341742),B=i(785893);function S({children:e,headingLevel:t,textWeight:i="normal",size:a}){(0,o.useEffect)(()=>{(0,s.Z)("BoardHeader","/app/www/common/PinBetterSave/BoardHeader.tsx")},[]);let r="100"===a?"200":a,l="500"===a||"600"===a?"400":a;return(0,B.jsx)(n.X6,{accessibilityLevel:t,size:r,children:(0,B.jsx)(n.xv,{inline:!0,size:l,weight:i,children:e})})}function j({boardPickerSuggestedBoards:e,clientTrackingParams:t,imageSignature:i,index:a,item:r,pinId:d,saveSessionId:c,surfaceOriginViewParameter:_,useLegoLayout:u}){(0,o.useEffect)(()=>{(0,s.Z)("BoardHeader","/app/www/common/PinBetterSave/BoardHeader.tsx")},[]);let{logContextEvent:h}=(0,l.u)();return(0,P.Z)(()=>{"shortlist"===r.category&&h({aux_data:{board_picker_surface_origin:_,board_picker_suggested_boards:e,image_signature:i,pin_id:d,save_session_id:c},event_type:13,clientTrackingParams:t,view_type:21,view_parameter:3988})}),(0,B.jsx)(n.xu,{marginTop:a>0?2:1,paddingX:u?4:3,paddingY:1,children:(0,B.jsx)(S,{headingLevel:3,size:u?"100":"200",children:r.title})})}var A=i(918920),C=i(247354);let z=e=>{let{accessibilityLabelText:t,board:i,boardPickerSuggestedBoards:s,buttonText:a,clientTrackingParams:r,displayAlreadySavedMsg:l,i18n:d,imageSignature:c,isSectionOpen:_,logContextEvent:u,onButtonClick:h,onClick:g,pinId:p,saveSessionId:b,shouldOpenSections:m=!0,showSaveToProfile:x,showFlyoutSaveButton:f=!0,surfaceOriginViewParameter:y,useLegoLayout:v}=e,[w,P]=(0,o.useState)(!1),S=(0,o.useRef)(null),j=!!i.section_count&&i.section_count>0,{images:z,image_cover_url:I}=i||{},k=!I?.includes("custom")&&z&&z["75x75"]&&z["75x75"][z["75x75"].length-1].url||I;(0,o.useEffect)(()=>{"boardless"===i.type&&u({aux_data:{board_picker_surface_origin:y,board_picker_suggested_boards:s,image_signature:c,pin_id:p,save_session_id:b},clientTrackingParams:r,event_type:13,view_parameter:3990,view_type:21})},[]);let T=()=>{g(i)};return(0,B.jsx)(n.xu,{"data-test-id":j?"boardWithSection":"boardWithoutSection",children:(0,B.jsx)(n.iP,{ref:S,onBlur:()=>{P(!1)},onFocus:()=>{P(!0)},onMouseEnter:()=>{P(!0)},onMouseLeave:()=>{P(!1)},onTap:T,children:(0,B.jsxs)(n.xu,{alignItems:"center",color:w?"secondary":"default","data-test-id":`board-row-${i.name||""}`,display:"flex",height:v?64:52,marginBottom:+!v,marginEnd:v?2:3,marginStart:v?2:3,marginTop:+!v,padding:2*!!v,rounding:3,children:[(0,B.jsxs)(n.xu,{"aria-hidden":"true",flex:"none",height:v?48:36,marginBottom:+!v,marginEnd:v?2:3,marginStart:2*!v,marginTop:+!v,overflow:"hidden",width:v?48:36,children:[x&&"boardless"===i.type&&(0,B.jsx)(n.zd,{height:"100%",rounding:2,width:"100%",children:(0,B.jsx)(n.xu,{alignItems:"center",color:w?"default":"secondary",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:(0,B.jsx)(n.xu,{children:(0,B.jsx)(n.JO,{accessibilityLabel:d.bt("Icône d’enregistrement dans le profil", "Save to profile icon", "BoardRow.TapArea.Icon", undefined, true),color:"default",icon:"history",size:24})})})}),k&&!m&&(0,B.jsx)(n.zd,{height:v?48:36,rounding:2,wash:!0,width:v?48:36,children:(0,B.jsx)(n.Ee,{alt:"",fit:"cover",naturalHeight:v?48:36,naturalWidth:v?48:36,src:k})}),k&&m?(0,B.jsx)(n.zd,{height:v?48:36,rounding:2,wash:!0,width:v?48:36,children:(0,B.jsx)(n.Ee,{alt:"",fit:"cover",naturalHeight:v?48:36,naturalWidth:v?48:36,src:k})}):(0,B.jsx)(n.zd,{height:v?48:36,rounding:2,width:v?48:36,children:(0,B.jsx)(n.xu,{color:m?"secondary":"transparent",height:"100%",width:"100%"})})]}),(0,B.jsxs)(n.xu,{flex:"grow",marginStart:+!v,overflow:"hidden",paddingY:1,children:[(0,B.jsx)(n.xv,{lineClamp:1,overflow:"breakAll",weight:m||!m?"bold":"normal",children:i.name}),l&&(0,B.jsx)(n.xu,{marginTop:1,children:(0,B.jsx)(n.xv,{align:"start",color:"default",size:"100",children:d.bt("Épingle déjà enregistrée ici", "Saved here already", "BoardFlyout.AlreadySaved.Message", undefined, true)})})]}),(0,B.jsxs)(n.kC,{alignItems:"center",gap:2,children:[(0===i.section_count||!m)&&f&&(0,B.jsx)(n.xu,{"data-test-id":"board-row-save-button-container",flex:"none",opacity:+!!w,children:(0,B.jsx)(n.zx,{accessibilityLabel:t||d.bt("enregistrer", "save", "boardRow.saveButton", undefined, true),color:"red","data-test-id":"board-row-save-button",onClick:({event:e})=>{T(),h&&h(),e.stopPropagation()},tabIndex:-1,text:a||d.bt("Enregistrer", "Save", "save button", undefined, true)})}),i&&!_?(0,B.jsx)(n.xu,{marginEnd:2*!v,children:(0,B.jsx)(C.Z,{board:i,showCollaborativeIcon:!!i.is_collaborative,showPrivateIcon:i.privacy===A.ZP.BoardPrivacy.SECRET,showProtectedIcon:i.privacy===A.ZP.BoardPrivacy.PROTECTED,showSectionsIcon:j&&m,useLegoLayout:v})}):null]})]})})})},I=e=>{(0,o.useEffect)(()=>{(0,s.Z)("BoardRow","/app/www/common/PinBetterSave/BoardRow.tsx")},[]);let{logContextEvent:t}=(0,l.u)(),i=(0,_.Z)();return(0,B.jsx)(z,{...e,i18n:i,logContextEvent:t})};var k=i(448505),T=i(288489);function E(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Z extends o.Component{constructor(...e){super(...e),E(this,"state",{hovered:!1}),E(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),E(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),E(this,"handleTouch",()=>{let{board:e,onClick:t,section:i}=this.props;t(i,e)}),E(this,"handleButtonClick",({event:e})=>{let{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()}),E(this,"tapAreaRef",(0,o.createRef)())}focus(){let e=this.tapAreaRef.current;e&&e.focus()}render(){let{hovered:e}=this.state,{buttonText:t,section:i,showSectionSaveButton:s,useLegoLayout:o}=this.props;return(0,B.jsx)(n.iP,{ref:this.tapAreaRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,children:(0,B.jsxs)(n.xu,{alignItems:"center",color:e?"secondary":"default",dangerouslySetInlineStyle:{__style:o?{}:{marginLeft:53,marginRight:11}},"data-test-id":`section-row-${i.title||""}`,display:"flex",height:o?64:52,marginEnd:2*!!o,marginStart:2*!!o,marginTop:+!o,padding:2*!!o,rounding:3,children:[o&&!!i.preview_pins?.length&&(0,B.jsx)(T.Z,{image_url:i.preview_pins[0].image_square_url??"",naturalHeight:i.preview_pins[0].image_square_size_pixels?.height??1,naturalWidth:i.preview_pins[0].image_square_size_pixels?.width??1}),(0,B.jsx)(n.xu,{flex:"grow",marginStart:4*!o,paddingY:1,children:(0,B.jsx)(n.xv,{lineClamp:1,weight:o?"bold":"normal",children:i.title})}),e&&s&&(0,B.jsx)(n.xu,{flex:"none",marginEnd:2*!o,children:(0,B.jsx)(n.zx,{accessibilityLabel:"save button",color:"red",onClick:this.handleButtonClick,text:t||this.props.i18n.bt("Enregistrer", "Save", "save button", undefined, true)})})]})})}componentDidMount(){(0,s.Z)("SectionRow","/app/www/common/PinBetterSave/SectionRow.tsx")}}function L(e){(0,o.useEffect)(()=>{(0,s.Z)("SectionRow","/app/www/common/PinBetterSave/SectionRow.tsx")},[]);let t=(0,_.Z)();return(0,B.jsx)(Z,{...e,i18n:t})}function R(e){(0,o.useEffect)(()=>{(0,s.Z)("BoardSections","/app/www/common/PinBetterSave/BoardSections.tsx")},[]);let t=(0,_.Z)(),{board:i,buttonText:a,onClick:r,onButtonClick:l,showSectionSaveButton:d,useLegoLayout:u}=e,h=(0,k.Z)(),g=(0,c.Z)(),p=(0,y.lJ)(g,h),b=(0,m.Z)({name:"BoardSectionsRepinResource",options:{board_id:i.id,orbac_subject_id:p},noCache:!0}),x=b&&b.data||[];return(0,B.jsxs)(n.xu,{children:[!b.isLoaded&&(0,B.jsx)(n.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,B.jsx)(n.xH,{accessibilityLabel:t.bt("chargement du sélecteur de tableau", "loading board picker", "accessibility text for loading spinner", undefined, true),show:!0})}),b.isLoaded&&(0,B.jsxs)(n.xu,{children:[u&&(0,B.jsx)(n.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,B.jsx)(S,{headingLevel:3,size:"200",children:t.bt("Sous-tableau", "Section", "PinBetterSave.BoardFlyout.SectionPlaceholderText", undefined, true)})}),x.map(e=>(0,B.jsx)(L,{board:i,buttonText:a,onButtonClick:l,onClick:r,section:e,showSectionSaveButton:d,useLegoLayout:u},e.id))]})]})}function F({onClick:e,title:t,showIcon:i}){(0,o.useEffect)(()=>{(0,s.Z)("BoardSuggestionRow","/app/www/common/PinBetterSave/BoardSuggestionRow.tsx")},[]);let a=(0,_.Z)(),[r,l]=(0,o.useState)(!1);return(0,B.jsx)(n.iP,{dataTestId:"board-suggestion-row-button",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onTap:()=>{e({title:t})},children:(0,B.jsxs)(n.xu,{alignItems:"center",color:r?"secondary":"default",display:"flex",height:i?64:52,marginBottom:1,marginEnd:3,marginStart:3,rounding:3,children:[(0,B.jsx)(n.xu,{flex:"none",height:i?48:36,marginBottom:1,marginEnd:3,marginStart:i?1:2,marginTop:1,overflow:"hidden",rounding:i?2:1,width:i?48:36,children:(0,B.jsx)(n.xu,{alignItems:i?"center":void 0,color:"secondary",display:i?"flex":void 0,height:"100%",justifyContent:i?"center":void 0,width:"100%",children:i&&(0,B.jsx)(n.JO,{accessibilityLabel:a.bt("Icône Créer un tableau", "Create board icon", "BoardSuggestionRow.AccessibilityLabel.Text", undefined, true),color:"default",icon:"add",size:20})})}),(0,B.jsx)(n.xu,{flex:"grow",paddingY:1,children:(0,B.jsx)(n.xv,{lineClamp:1,weight:"bold",children:t})}),r&&(0,B.jsx)(n.xu,{marginEnd:2,children:(0,B.jsx)(n.zx,{accessibilityLabel:"create button",color:"red",text:a.bt("Créer", "Create", "create button to create a new board", undefined, true)})})]})})}function O(e){(0,o.useEffect)(()=>{(0,s.Z)("BoardSuggestions","/app/www/common/PinBetterSave/BoardSuggestions.tsx")},[]);let t=(0,_.Z)(),{suggestionsResource:i,onClick:a,pinBuilderSuggestions:r,inWebRepinFlowExp:l}=e,d=r||i&&i.data||[],c=(0,B.jsxs)(o.Fragment,{children:[l&&(0,B.jsx)(n.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,B.jsx)(S,{headingLevel:3,size:"100",children:t.bt("Suggestions", "Suggestions", "PinBetterSave.BoardFlyout.SectionPlaceholderText", undefined, true)})}),d.map((e,t)=>(0,B.jsx)(F,{onClick:a,showIcon:l,title:e.title},t))]});return(0,B.jsx)(o.Fragment,{children:d?c:(0,B.jsx)(n.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,B.jsx)(n.xH,{accessibilityLabel:t.bt("Chargement des suggestions du tableau", "loading board suggestions", "accessibility text for loading spinner", undefined, true),show:!0})})})}E(Z,"defaultProps",{showSectionSaveButton:!0});var N=i(461951);function D({isBoardCreate:e,onCreateBoardClick:t,useLegoLayout:i}){(0,o.useEffect)(()=>{(0,s.Z)("CreateBoardButton","/app/www/common/PinBetterSave/CreateBoardButton.tsx")},[]);let a=(0,_.Z)(),[r,l]=(0,o.useState)(!1),[d,c]=(0,o.useState)(!1);return(0,B.jsx)(n.xu,{"data-test-id":"create-board",display:"flex",height:"100%",rounding:2,children:(0,B.jsx)(n.iP,{dataTestId:e?"create-board-button":"create-section-button",onBlur:()=>c(!1),onFocus:()=>c(!0),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onTap:t,rounding:2,children:(0,B.jsxs)(n.xu,{alignItems:"center",color:r?"secondary":"default",dangerouslySetInlineStyle:{__style:{...d?{border:`2px solid ${N.nTo}`}:{}}},display:"flex",height:"100%",padding:i?4:2,width:"100%",children:[(0,B.jsx)(n.xu,{color:i?"secondary":"transparent",dangerouslySetInlineStyle:{__style:i?{padding:"14px"}:{}},marginEnd:i?2:5,marginStart:4*!i,rounding:2*!!i,children:(0,B.jsx)(n.JO,{accessibilityLabel:"",color:i?"default":"error",icon:i?"add":"add-circle",size:i?20:28})}),e?(0,B.jsx)(n.xv,{align:"center",lineClamp:1,weight:"bold",children:a.bt("Créer un tableau", "Create board", " - ", undefined, true)}):(0,B.jsx)(n.xv,{align:"center",lineClamp:1,weight:"bold",children:a.bt("Créer un sous-tableau", "Create section", " - ", undefined, true)})]})})})}var H=i(443962),M=i(524558);function U(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let J="allBoards",W="shortlist",X=`
.BoardsSlideLeft {
  animation: boardFlyoutSlideLeft 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

.BoardsSlideRight {
  animation: boardFlyoutSlideRight 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

.BoardsSlideLeftRTL {
  animation: boardFlyoutSlideLeftRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

.BoardsSlideRightRTL {
  animation: boardFlyoutSlideRightRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

@keyframes boardFlyoutSlideLeft {
  from {
    margin-left: 0%;
  }

  to {
    margin-left: -100%;
  }
}

@keyframes boardFlyoutSlideRight {
  from {
    margin-left: -100%;
  }

  to {
    margin-left: 0%;
  }
}

@keyframes boardFlyoutSlideLeftRTL {
  from {
    margin-right: -100%;
  }

  to {
    margin-right: 0%;
  }
}

@keyframes boardFlyoutSlideRightRTL {
  from {
    margin-right: 0%;
  }

  to {
    margin-right: -100%;
  }
}
`;class $ extends o.PureComponent{constructor(...e){super(...e),U(this,"state",{boardSuggestions:[],isSectionOpen:null,selectedBoardId:"",selectedBoardCategory:"",searchQuery:"",searchBoxFocused:!0,saveSessionId:(0,r.Z)()}),U(this,"handleScroll",()=>{let{_container:e}=this,{logContextEvent:t}=this.props;t({event_type:110,component:13282,view_type:21})}),U(this,"getComplexBoardPickerThreshold",()=>{let{boardResource:e,checkExperiment:t}=this.props,i=e?.data?.all_boards||[],s=i.length>=2&&i.length<=5?t("web_curation_board_picker_tune_complex_board_picker").group:"control",o=3;switch(s){case"enabled_2":o=2;break;case"enabled_4":case"employees_enabled":o=4;break;case"enabled_5":o=5;break;default:o=3}return o}),U(this,"refHandler",e=>{this.removeEventListeners(),e&&e.addEventListener("scroll",this.handleScroll,{once:!0}),this._container=e}),U(this,"getItems",e=>{let{boardResource:t,showSaveToProfile:i,checkExperiment:s}=this.props;if(!t?.data)return[];let{all_boards:o}=t.data,a=o.length>=this.getComplexBoardPickerThreshold(),r=i&&o.length&&s("web_curation_board_picker_reorder_profile_option").anyEnabled,n=[{boardId:"",image_cover_url:"",is_collaborative:!1,isOpen:!1,name:this.props.i18n.bt("Profil", "Profile", "pinBetterSave.initialSelection.boardlessPinsOption", undefined, true),privacy:"public",section_count:0,type:"boardless",url:"/me/"}],l=this.getAllBoards().map((e,t)=>this.mapBoards(e,J,t)),d=this.getShortlist().map((e,t)=>this.mapBoards(e,W,t)),{searchQuery:c}=this.state;return c.length>=x.Z?[...(0,H.j)(l,c)]:[...a||!i||r?[]:[{type:"header",title:this.props.i18n.bt("Effectuer un enregistrement rapide et organiser plus tard", "Quick save and organize later", "BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.boardlessPinsTitle", undefined, true)},...n],...a&&a&&i&&!r?n:[],...a&&d?.length?[{category:W,type:"header",title:e?this.props.i18n.bt("Meilleurs choix", "Top choices", "PinBetterSave.BoardFlyout.TopChoicesSectionTitle", undefined, true):this.props.i18n.bt("Meilleures suggestions de tableaux", "Top board suggestions", "Header for top suggesions in board picker", undefined, true)},...d]:[],...o.length>0?[{type:"header",title:!a&&i?this.props.i18n.bt("Enregistrer dans le tableau", "Save to board", "BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.saveToBoardTitle", undefined, true):this.props.i18n.bt("Tous les tableaux", "All boards", "Header for all boards in board picker", undefined, true)},...l,...r?n:[]]:[]]}),U(this,"mapBoards",(e,t,i)=>{let{selectedBoardId:s,selectedBoardCategory:o}=this.state,a=e.id===s&&t===o;return{...e,category:t,isOpen:a,gridIndex:i}}),U(this,"handleBack",()=>{let{setBoardWithSection:e}=this.props;this.setState({isSectionOpen:!1,selectedBoardId:"",selectedBoardCategory:""}),e&&e(null)}),U(this,"handleSectionClick",(e,t)=>{let{clientTrackingParams:i,imageSignature:s,logContextEvent:o,onItemChosen:a,pinId:r,surfaceOriginViewParameter:n}=this.props,{saveSessionId:l,searchQuery:d}=this.state;o({event_type:101,clientTrackingParams:i,component:13282,element:36,object_id_str:t.id,view_type:91,view_parameter:3133,aux_data:{board_id:t.id,board_picker_surface_origin:n,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:t.gridIndex,image_signature:s,is_profile_save:!1,pin_id:r,save_session_id:l,search_query:d,section_id:e.id}}),a({boardId:t.id,url:e.slug?`${t.url}${e.slug}/`:t.url,sectionId:e.id,title:e.title||"",type:e.type,imageCoverUrl:t.image_cover_url,ownerUsername:t.owner&&t.owner.username||""})}),U(this,"getPinBuilderSuggestions",async()=>{let{clientTrackingParams:e,imageSignature:t,logContextEvent:i,pinId:s,surfaceOriginViewParameter:o}=this.props,{saveSessionId:a}=this.state;if(s){let r=await (0,d.Z)({url:`/v3/pins/${s}/board_title_suggestions/`,data:{pin_id:s}});if(r.resource_response.data){let n=r.resource_response.data.map(e=>({title:e.title,metadata:JSON.parse(e?.metadata??"{}")}))||[];this.setState({boardSuggestions:n}),i({aux_data:{board_picker_surface_origin:o,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),image_signature:t,pin_id:s,save_session_id:a},component:13282,clientTrackingParams:e,event_type:13,view_parameter:3992,view_type:21})}}}),U(this,"getAllBoards",()=>{let{boardResource:e,advertiser_id:t}=this.props;return(e?.data?.all_boards||[]).filter(e=>!t||"secret"!==e.privacy)}),U(this,"getShortlist",()=>{let{suggestedBoardsShortListResource:e,displayShortlistMostRecentBoard:t,boardResource:i}=this.props,s=i?.data?.boards_shortlist||[];return t?s:e?.data||[]}),U(this,"getBoards",e=>e===J?this.getAllBoards():e===W?this.getShortlist():[]),U(this,"getSuggestedBoardsIds",()=>{let{showSaveToProfile:e}=this.props,t=(e?this.getShortlist().slice(0,2):this.getShortlist()).map(e=>e.id);return e&&t.unshift("PROFILE_PINS"),t}),U(this,"getTopChoiceBoardsAuxData",()=>{let{showSaveToProfile:e}=this.props;return(e?this.getShortlist().slice(0,2):[...this.getShortlist()]).map(e=>({board_title_id:String(e.id),board_title_kind:JSON.parse(e.recommendation_reason??"{}").reason,board_title:String(e.name),board_title_score:JSON.parse(e.recommendation_reason??"{}").score}))}),U(this,"getBoardTitleSuggestionsAuxData",()=>{let{boardSuggestions:e}=this.state;return e.map(e=>({board_title_id:String(e.metadata.value),board_title_kind:String(e.metadata.kind),board_title:String(e.title),board_title_score:String(e.metadata.confidence)}))}),U(this,"handleBoardWithSectionsClick",e=>{let{clientTrackingParams:t,logContextEvent:i,pinId:s,setBoardWithSection:o,surfaceOriginViewParameter:a}=this.props,{saveSessionId:r,searchQuery:n,selectedBoardId:l,selectedBoardCategory:d}=this.state,c=this.getBoards(e.category).find(({id:t})=>t===e.id),_=l===e.id&&d===e.category;i({event_type:13,clientTrackingParams:t,component:13282,element:36,object_id_str:e.id,view_type:275,aux_data:{board_id:e.id,board_picker_surface_origin:a,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,is_profile_save:!1,pin_id:s,save_session_id:r,search_query:n}}),c&&o&&o(c),this.setState({isSectionOpen:!0,selectedBoardId:_?"":e.id,selectedBoardCategory:_?"":e.category})}),U(this,"handleBoardClick",({board:e,toggleSections:t})=>{let{clientTrackingParams:i,imageSignature:s,logContextEvent:o,onItemChosen:a,pinId:r,surfaceOriginViewParameter:n}=this.props,{saveSessionId:l,searchQuery:d}=this.state;this.setState({searchBoxFocused:!1}),t?(o({event_type:101,component:13282,element:36,clientTrackingParams:i,object_id_str:e.id,view_type:91,view_parameter:e.category===W?3988:3989,aux_data:{board_id:e.id,board_component:e.category===W?3988:3989,board_picker_surface_origin:n,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,image_signature:s,is_profile_save:!1,pin_id:r,save_session_id:l,search_query:d}}),this.handleBoardWithSectionsClick({category:e.category,gridIndex:e.gridIndex,id:e.id})):(o("boardless"===e.type?{event_type:101,clientTrackingParams:i,component:13282,element:36,object_id_str:e.id,view_type:91,view_parameter:3990,aux_data:{board_id:e.id,board_component:3990,board_picker_surface_origin:n,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,image_signature:s,is_profile_save:!0,pin_id:r,save_session_id:l,search_query:d}}:{event_type:101,clientTrackingParams:i,component:13282,element:36,object_id_str:e.id,view_type:91,view_parameter:e.category===W?3988:3989,aux_data:{board_id:e.id,board_component:e.category===W?3988:3989,board_picker_surface_origin:n,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,image_signature:s,is_profile_save:"boardless"===e.type,pin_id:r,save_session_id:l,search_query:d}}),a({boardId:e.id,url:e.url,title:e.name||"",type:e.type,imageCoverUrl:e.image_cover_url,privacy:e.privacy}))}),U(this,"handleSearchQueryUpdate",e=>{this.setState(t=>({...t,searchQuery:e}))}),U(this,"handleCreateBoardClick",e=>{let{clientTrackingParams:t,imageSignature:i,logContextEvent:s,onBoardCreate:o,pinId:a,surfaceOriginViewParameter:r,surface:n}=this.props,{saveSessionId:l,searchQuery:d}=this.state;s({event_type:101,clientTrackingParams:t,component:13282,element:249,view_type:91,view_parameter:e?87:3132,aux_data:{board_component:e?87:3132,board_picker_surface_origin:r,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),image_signature:i,pin_id:a,save_session_id:l,search_query:d,source:n??v.Z.BOARD_PICKER}}),o({title:d})}),U(this,"handleBoardSuggestionClick",e=>{let{clientTrackingParams:t,imageSignature:i,logContextEvent:s,onBoardCreate:o,pinId:a,surfaceOriginViewParameter:r}=this.props,{saveSessionId:n}=this.state;s({event_type:101,clientTrackingParams:t,component:13282,element:23,view_type:91,view_parameter:3992,aux_data:{board_picker_surface_origin:r,board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),image_signature:i,pin_id:a,save_session_id:n}}),o(e)})}componentWillUnmount(){this.removeEventListeners()}componentDidMount(){let{clientTrackingParams:e,logContextEvent:t,imageSignature:i,pinId:s,setBoardWithSection:o,surfaceOriginViewParameter:a}=this.props,{saveSessionId:r}=this.state;o&&o(null),t({event_type:13,component:13282,clientTrackingParams:e,element:10960,aux_data:{board_picker_surface_origin:a,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),image_signature:i,pin_id:s,save_session_id:r}})}componentDidUpdate(e){let{saveSessionId:t}=this.state,{clientTrackingParams:i}=this.props;!e.suggestedBoardsShortListResource?.isLoaded&&this.props.suggestedBoardsShortListResource?.isLoaded&&this.getSuggestedBoardsIds().length>0&&this.props.logContextEvent({event_type:13,clientTrackingParams:i,component:13282,element:1001,aux_data:{pin_id:this.props.pinId,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),save_session_id:t}})}removeEventListeners(){let{_container:e}=this;e&&e.removeEventListener("scroll",this.handleScroll)}render(){let{accessibilityLabelText:e,boardResource:t,buttonText:i,changeBoardModal:s,clientTrackingParams:a,customItem:r,headerText:l,hideAlreadySavedMsg:d,imageSignature:c,onButtonClick:_,paneHeight:g,paneWidth:p,pinAlreadySavedBoard:b,pinId:m,requestContext:x,sectionText:f,showSaveToProfile:y,showSearchField:v,showCreateBoardButton:P,showFlyoutSaveButton:A,showSections:C,showSectionSaveButton:z,suggestedBoardsShortListResource:k,surfaceOriginViewParameter:T,useStoryboardStyle:E,useLegoLayout:Z,boardFlyoutStyle:L}=this.props,{boardSuggestions:F,isSectionOpen:N,saveSessionId:H,searchBoxFocused:U,searchQuery:W}=this.state;if(!t)return null;let{isLoaded:$,error:q}=t,Y=[];($&&!q||k&&k.data&&!k.error)&&(Y=this.getItems(!!Z));let K=Y.filter(e=>e&&e.category===J).length,G=K>this.getComplexBoardPickerThreshold();G||0!==F.length||this.getPinBuilderSuggestions();let Q=E?200:322,V=E?214:334,ee=g||290,et=JSON.stringify(this.getTopChoiceBoardsAuxData()),ei=x.isRTL?"BoardsSlideRightRTL":"BoardsSlideLeft",es="";null!==N&&(es=x.isRTL?"BoardsSlideLeftRTL":"BoardsSlideRight");let eo=e=>(0,B.jsxs)(o.Fragment,{children:[!Z&&(0,B.jsx)(n.iz,{}),(0,B.jsx)(n.xu,{borderStyle:Z&&K>=3&&Y.length>1?"shadow":"none",dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}},height:Z?80:52,overflow:"hidden",children:(0,B.jsx)(D,{isBoardCreate:e,onCreateBoardClick:({event:t})=>{t.stopPropagation(),this.handleCreateBoardClick(e)},useLegoLayout:Z})})]});return(0,B.jsxs)(n.xu,{color:"default","data-test-id":"board-picker-flyout",height:E||s?"100%":Z?498:439,overflow:"hidden",rounding:2,width:Z&&!s?"100%":p,zIndex:w.lI,children:[(0,B.jsx)(u.Z,{unsafeCSS:X}),$?null:(0,B.jsx)(n.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:Z&&!s?360:p,children:(0,B.jsx)(n.xH,{accessibilityLabel:this.props.i18n.bt("chargement du sélecteur de tableau", "loading board picker", "accessibility text for loading spinner", undefined, true),show:!0})}),(0,B.jsx)(n.kC,{direction:"row",children:$&&(0,B.jsx)("div",{className:N?ei:es,children:(0,B.jsx)(n.xu,{position:"relative",children:(0,B.jsxs)(n.xu,{direction:"row",display:"flex",width:Z&&!s?720:(p??0)*2,zIndex:new n.Ry(0),children:[(0,B.jsxs)(n.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",width:Z&&!s?360:p,children:[Z&&!s&&(0,B.jsx)(n.kC,{alignItems:"center",height:64,justifyContent:"center",children:(0,B.jsx)(S,{headingLevel:2,size:"300",textWeight:"bold",children:l||(y?this.props.i18n.bt("Enregistrer", "Save", "PinBetterSave.BoardFlyout.SavePlaceholder", undefined, true):this.props.i18n.bt("Enregistrer dans le tableau", "Save to board", "PinBetterSave.BoardFlyout.SaveToBoardPlaceholder", undefined, true))})}),(v??!s)&&(0,B.jsxs)(n.xu,{"data-test-id":"search-boards-field-container",height:Z?64:"auto",padding:L?.searchFieldStyle?.padding??3*!Z,paddingX:L?.searchFieldStyle?.paddingX??(Z?4:3),paddingY:L?.searchFieldStyle?.paddingY,children:[(0,B.jsx)(M.Z,{accessibilityClearButtonLabel:this.props.i18n.bt("Effacer le texte de recherche de tableau", "Clear board search text", "dropdown.searchField.clearButtonLabel", undefined, true),accessibilityLabel:this.props.i18n.bt("Rechercher dans vos tableaux", "Search through your boards", "search bar placeholder text", undefined, true),focused:U,id:"pickerSearchField",onChange:({value:e})=>this.handleSearchQueryUpdate(e),placeholder:this.props.i18n.bt("Rechercher", "Search", "search bar placeholder text", undefined, true),size:L?.searchFieldStyle?.size??"lg",value:W}),(0,B.jsx)(n.xu,{"aria-live":"assertive",display:"visuallyHidden",children:K?(0,h.Wc)(this.props.i18n.nbt(["Nous avons trouve un tableau", "Nous avons trouve {{boardCount}} tableaux"], K, "PinBetterSave.BoardFlyout.BoardFoundsDropdown", true),{boardCount:K.toString()}):this.props.i18n.bt("Aucun tableau trouvé", "No boards found", "PinBetterSave.BoardFlyout.noBoardFoundsDropdown", undefined, true)})]}),(0,B.jsxs)(n.xu,{ref:this.refHandler,maxHeight:Z?ee:Q,minHeight:Z?290:Q,overflow:"scrollY",children:[k&&!k.isLoaded?(0,B.jsx)(n.xu,{"data-test-id":"suggestedBoardsContainer",children:(0,B.jsx)(n.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:128.5,width:"100%",children:(0,B.jsx)(n.xH,{accessibilityLabel:this.props.i18n.bt("chargement du sélecteur de tableau", "loading board picker", "accessibility text for loading spinner", undefined, true),show:!0})})}):null,r,Y.map((t,s)=>"header"===t.type?(0,B.jsx)(j,{boardPickerSuggestedBoards:et,clientTrackingParams:a,imageSignature:c,index:s,item:t,pinId:m,saveSessionId:H,surfaceOriginViewParameter:T,useLegoLayout:Z},`${t.title}`):(0,B.jsx)(n.xu,{children:(0,B.jsx)(I,{accessibilityLabelText:e,board:t,boardPickerSuggestedBoards:et,buttonText:i,clientTrackingParams:a,displayAlreadySavedMsg:b&&b.id===t.id&&!d,imageSignature:c,onButtonClick:_,onClick:e=>{this.handleBoardClick({board:e,toggleSections:C&&!!e.section_count})},pinId:m,saveSessionId:H,shouldOpenSections:C,showFlyoutSaveButton:A,showSaveToProfile:y,surfaceOriginViewParameter:T,useLegoLayout:Z})},`${t.category}-${t.id}`)),!G&&F.length>0&&(0,B.jsx)(O,{inWebRepinFlowExp:Z,onClick:this.handleBoardSuggestionClick,pinBuilderSuggestions:F})]}),P&&eo(!0)]}),N&&(0,B.jsxs)(n.xu,{direction:"column",display:"flex",marginBottom:2*!!Z,width:Z&&!s?360:p,children:[(0,B.jsxs)(n.kC,{alignContent:"center",alignItems:"center",direction:"row",justifyContent:"center",children:[(0,B.jsx)(n.sg,{span:2,children:(0,B.jsx)(n.xu,{alignContent:"center",alignItems:"center",display:"flex",justifyContent:"start",marginStart:3,children:(0,B.jsx)(n.hU,{accessibilityLabel:"Back button",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBack,size:"sm"})})}),(0,B.jsx)(n.sg,{span:8,children:(0,B.jsx)(n.kC,{alignItems:"center",height:Z?64:52,justifyContent:"center",children:(0,B.jsx)(S,{headingLevel:2,size:"300",textWeight:"bold",children:f||(Z?this.props.i18n.bt("Enregistrer une Épingle dans", "Save Pin to", "PinBetterSave.BoardFlyout.SectionHeader", undefined, true):this.props.i18n.bt("Choisir un sous-tableau", "Choose section", "Header for section header", undefined, true))})})}),(0,B.jsx)(n.sg,{span:2,children:(0,B.jsx)(n.xu,{})})]}),!Z&&(0,B.jsx)(n.iz,{}),(0,B.jsx)(n.xu,{maxHeight:Z?ee:V,minHeight:Z?354:V,overflow:"scrollY",children:Y?(0,B.jsx)(o.Fragment,{children:Y&&Y.map(e=>"header"===e.type?null:(0,B.jsx)(n.xu,{children:e.isOpen&&(0,B.jsxs)(o.Fragment,{children:[Z&&(0,B.jsx)(n.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,B.jsx)(S,{headingLevel:3,size:"100",children:this.props.i18n.bt("Tableau", "Board", "PinBetterSave.BoardFlyout.BoardPickerTitle", undefined, true)})}),(0,B.jsx)(I,{board:e,boardPickerSuggestedBoards:et,buttonText:i,displayAlreadySavedMsg:b&&b.id===e.id,isSectionOpen:!0,onButtonClick:_,onClick:e=>{this.handleBoardClick({board:e,toggleSections:!1})},saveSessionId:H,shouldOpenSections:!1,showFlyoutSaveButton:A,useLegoLayout:Z}),(0,B.jsx)(R,{board:e,buttonText:i,onButtonClick:_,onClick:this.handleSectionClick,showSectionSaveButton:z,useLegoLayout:Z})]})},`${e.category}-${e.id}`))}):null}),P&&!s&&eo(!1)]})]})})})})]})}}function q(e){let{logContextEvent:t}=(0,l.u)(),i=(0,_.Z)(),{checkExperiment:s}=(0,g.Z)();return(0,B.jsx)($,{...e,checkExperiment:s,i18n:i,logContextEvent:t,requestContext:(0,p.B)()})}function Y(e,t,i){let{advertiser:s}=e,o={};if(i&&i.user&&i.user.username&&i.id!==(t.isAuth?t.id:void 0)&&(o.orbacActingAs=i,o.username=i.user.username),t&&s){let i=e.advertiser;if(t.isAuth&&i.is_impersonation)return{hasMUA:i.owner_user_id!==t.id,advertiser_id:i.id,username:i.owner_user_id,...o};if(t.isAuth&&i.owner_user_id!==t.id)return{hasMUA:!0,advertiser_id:i.id,username:i.owner_user_id,...o};if(t.isAuth&&i.owner_user_id===t.id)return{hasMUA:!1,advertiser_id:i.id,username:"me"}}return{advertiser_id:void 0,hasMUA:void 0,...o}}function K(e){let{advertiser_id:t,hasMUA:i,boardFilter:s="all"}=e,{username:o}=e,a={field_set_key:"board_picker",filter:i?"protected":s,...o?{username:o}:Object.freeze({}),...t?{advertiser_id:t}:{}};return e.orbacActingAs&&e.orbacActingAs.user&&e.orbacActingAs.user.username&&(a={...a,username:e.orbacActingAs.user.username,orbac_subject_id:e.orbacActingAs.id,filter:s}),a}function G(e,t){return(i,s)=>i((0,b.jB)("BoardPickerBoardsResource",K(Y(s(),e,t))))}function Q(e){(0,o.useEffect)(()=>{(0,s.Z)("BoardFlyout","/app/www/common/PinBetterSave/BoardFlyout.tsx")},[]);let t=(0,c.Z)(),i=(0,a.v9)(i=>Y(i,t,e.orbacActingAs)),r={...e,...i},n=(0,m.Z)({name:"BoardPickerBoardsResource",options:K(r)});return(0,B.jsx)(q,{...r,boardResource:n})}function V(e){(0,o.useEffect)(()=>{(0,s.Z)("BoardFlyout","/app/www/common/PinBetterSave/BoardFlyout.tsx")},[]);let t=(0,f.Z)(),i=(0,c.Z)(),a=(0,y.lJ)(i,t);return(0,B.jsx)(Q,{...e,orbacActingAs:a?t:void 0})}function ee(e){(0,o.useEffect)(()=>{(0,s.Z)("BoardFlyout","/app/www/common/PinBetterSave/BoardFlyout.tsx")},[]);let t=(0,m.Z)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:e.pinId,shortlist_length:2,num_shortlist_suggestions:2}}),{data:i}=(0,m.Z)({name:"ApiResource",options:{url:`/v3/pins/${e.pinId}/`,field_sets:["pin.pinned_to_board()"]},noCache:!0});return(0,B.jsx)(q,{...e,pinAlreadySavedBoard:i?.pinned_to_board,suggestedBoardsShortListResource:t})}U($,"defaultProps",{clientTrackingParams:void 0,paneWidth:320,showCreateBoardButton:!0,showFlyoutSaveButton:!0,showSections:!0,showSectionSaveButton:!0,useLegoLayout:!0})},247354:function(e,t,i){i.d(t,{Z:()=>c});var s=i(281098),o=i(667294),a=i(20256),r=i(411544),n=i(494904),l=i(785893);let d=({collaborator_count:e,useLegoLayout:t,type:i})=>t?(0,l.jsx)(a.xu,{marginEnd:2*!!e,children:(0,l.jsx)(n.Z,{type:i})}):(0,l.jsx)(n.Z,{type:i}),c=({board:e,showCollaborativeIcon:t,showPrivateIcon:i,showProtectedIcon:c,showSectionsIcon:_,useLegoLayout:u})=>{(0,o.useEffect)(()=>{(0,s.Z)("BoardPickerRowIconList","/app/www/common/PinBetterSave/BoardPickerRowIconList.tsx")},[]);let h=e?.collaborating_users?.length||0;return t||i||c||_?(0,l.jsxs)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{paddingLeft:8}},"data-test-id":"board-picker-row-icon-list-box",direction:"row",display:"flex",marginEnd:5*!u,children:[i&&(0,l.jsx)(d,{collaborator_count:h,type:"secret",useLegoLayout:u}),c&&(0,l.jsx)(d,{collaborator_count:h,type:"protected",useLegoLayout:u}),t&&(u?(0,l.jsx)(r.Z,{board:e,isCompact:!0,ownerOnly:!1}):(0,l.jsx)(n.Z,{type:"group"})),_&&(0,l.jsx)(n.Z,{type:"sections"})]}):null}},288489:function(e,t,i){i.d(t,{Z:()=>n});var s=i(281098),o=i(667294),a=i(20256),r=i(785893);let n=({image_url:e,naturalHeight:t,naturalWidth:i})=>((0,o.useEffect)(()=>{(0,s.Z)("RepinSectionImage","/app/www/common/PinBetterSave/RepinSectionImage.tsx")},[]),(0,r.jsx)(a.xu,{"aria-hidden":"true",height:48,marginBottom:1,marginEnd:2,marginTop:1,overflow:"hidden",width:48,children:(0,r.jsx)(a.zd,{height:48,rounding:2,wash:!0,width:48,children:(0,r.jsx)(a.Ee,{alt:"",naturalHeight:t,naturalWidth:i,src:e})})}))},979922:function(e,t,i){i.d(t,{BT:()=>Z,Du:()=>R,Fh:()=>I,HY:()=>L,HZ:()=>T,Jw:()=>x,Kp:()=>H,L7:()=>s,LT:()=>_,Lj:()=>N,Nw:()=>S,Q_:()=>B,Qc:()=>o,R5:()=>A,RA:()=>j,Tt:()=>z,UF:()=>d,UV:()=>r,VB:()=>y,W1:()=>a,Ws:()=>u,X5:()=>C,Yt:()=>E,ZW:()=>l,cK:()=>v,cy:()=>m,fA:()=>O,gm:()=>f,h7:()=>P,k:()=>p,mE:()=>D,o4:()=>g,oL:()=>F,qf:()=>h,tr:()=>c,uD:()=>w,uO:()=>b,vF:()=>n,wJ:()=>k});let s=1,o=2,a="female",r="male",n="unspecified",l="en-US",d="US",c=3,_="Welcome",u="Gender",h="CountryLocale",g="InterestPicker",p="UseCase",b="PinPicker",m="LoadingStep",x="AppInstall",f="NUX_PIN_PICKER_STEP_STATUS",y="NUX_USE_CASE_STEP_STATUS",v={NUX_GENDER_STEP_NAME:u,NUX_COUNTRY_LOCALE_STEP_NAME:h,NUX_INTEREST_PICKER_STEP_NAME:g,NUX_USE_CASE_STEP_NAME:p,NUX_PIN_PICKER_STEP_NAME:b,NUX_LOADING_STEP_NAME:m,NUX_APP_INSTALL_STEP_NAME:x},w=2,P=3,B=6,S=112,j=160,A=60,C=1e3,z=2500,I=1900,k=2e3,T=3,E=1,Z=3,L=3,R=5e3,F=250,O=1e10,N=507641,D=300,H=200},808141:function(e,t,i){i.d(t,{Z:()=>p});var s=i(281098),o=i(667294),a=i(20256),r=i(140725),n=i(19585),l=i(15667),d=i(968927),c=i(509120),_=i(785893);function u({cover:e,height:t,image:i,width:r}){return((0,o.useEffect)(()=>{(0,s.Z)("BoardCollageCoverImage","/app/www/profile/ProfileBoardCard/BoardCollageCoverImage.tsx")},[]),e)?(0,_.jsx)(c.Z,{customCover:e.isCustom,height:t,imgPos:e.position||{width:0,height:0,x:0,y:0},imgUrl:e.url??"",width:r}):i&&i.url?(0,_.jsx)(a.zd,{height:t,wash:!0,width:r,children:(0,_.jsx)(a.Ee,{alt:"Board collage cover image",color:"#EFEFEF",fit:"cover",naturalHeight:i.height??1,naturalWidth:i.width??1,src:i.url})}):(0,_.jsx)(a.xu,{color:"secondary",height:t,width:r})}var h=i(785352),g=i(875280);function p({boardThumbs:e=[],cover:t,editButton:i,isActive:c,isSecret:p,layout:b,sensitivityScreenAuxData:m,showSensitivityScreen:x=!1}){(0,o.useEffect)(()=>{(0,s.Z)("BoardCollage","/app/www/profile/ProfileBoardCard/BoardCollage.tsx")},[]);let f=(0,n.Z)();(0,r.Q)(x?{component:13861,view_type:215,aux_data:m}:null);let{isRTL:y}=(0,l.B)(),{height:v,width:w}=(0,g.F)(b),P=Math.floor(v/2),B=Math.floor(w/3),S=t?void 0:e[0],j=e.slice(+!t);return(0,_.jsxs)(a.zd,{height:v,rounding:4,wash:c,width:w,children:[(0,_.jsx)(a.xu,{"aria-label":"Board",color:"default",dangerouslySetInlineStyle:{__style:x?{filter:"blur(20px)"}:{}},display:"flex",height:"100%",justifyContent:"between",width:"100%",children:(0,_.jsxs)(a.xu,{"aria-hidden":"true",dangerouslySetInlineStyle:{__style:{gap:"1px"}},display:"flex",height:"100%",justifyContent:"between",width:"100%",children:[(0,_.jsx)(u,{cover:t,height:v,image:S,width:Math.floor(w/3*2)}),(0,_.jsxs)(a.kC,{alignItems:"stretch",direction:"column",flex:"none",height:"100%",justifyContent:"between",children:[(0,_.jsx)(h.Z,{height:P,image:j[0],width:B}),(0,_.jsx)(h.Z,{height:P,image:j[1],width:B})]})]})}),p&&(0,_.jsx)(a.xu,{alignItems:"center",color:"default",display:"flex",height:32,justifyContent:"center",left:!y,marginStart:2,marginTop:2,position:"absolute",right:y,rounding:"circle",top:!0,width:32,children:(0,_.jsx)(d.Z,{})}),c&&i&&(0,_.jsx)(a.xu,{alignItems:"center",bottom:!0,color:"default",display:"flex",height:32,justifyContent:"center",left:y,marginBottom:2,marginEnd:2,position:"absolute",right:!y,rounding:"circle",width:32,children:i}),x&&(0,_.jsx)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:"rgba(0,0,0,0.5)"}},display:"flex",height:"100%",justifyContent:"center",position:"absolute",top:!0,width:"100%",children:(0,_.jsx)(a.X6,{align:"center",color:"light",size:"400",children:f.bt("Ce tableau peut comporter certains contenus sensibles.", "This board may contain sensitive content", "profileBoardCard.boardCollage.heading", undefined, true)})})]})}},785352:function(e,t,i){i.d(t,{Z:()=>n});var s=i(281098),o=i(667294),a=i(20256),r=i(785893);function n({image:e,width:t,height:i}){return(0,o.useEffect)(()=>{(0,s.Z)("BoardCollageImage","/app/www/profile/ProfileBoardCard/BoardCollageImage.tsx")},[]),e&&e.url?(0,r.jsx)(a.zd,{height:i,wash:!0,width:t,children:(0,r.jsx)(a.Ee,{alt:"Board collage image",color:"#EFEFEF",fit:"cover",naturalHeight:e.height||1,naturalWidth:e.width||1,src:e.url})}):(0,r.jsx)(a.xu,{color:"secondary",height:i,width:t})}},411544:function(e,t,i){i.d(t,{Z:()=>_});var s=i(281098),o=i(667294),a=i(20256),r=i(821342),n=i(19585),l=i(302148),d=i(785893);function c(e){let t=e?.imageMediumUrl??e?.image_medium_url??"",i=e?.avatar_color_index??void 0;return{name:e?.fullName??e?.full_name??"",color:i,src:"https://s.pinimg.com/images/user/default_75.png"===t?void 0:t}}function _({board:e,forceViewer:t,isCompact:i,ownerOnly:_}){(0,o.useEffect)(()=>{(0,s.Z)("CollaboratorsFacepile","/app/www/profile/ProfileBoardCard/ProfileBoardCardFooter/CollaboratorsFacepile.tsx")},[]);let u=(0,n.Z)(),h=(0,r.Z)(),g=_?[c(e?.owner)]:(function(e,t,i){let{collaborated_by_me:s,collaborating_users:o,owner:a}=e??{},r=o??[],n=[a];if(s||i){let e=r.findIndex(e=>t.isAuth&&e.id===t.id);if(-1!==e){let t=r.splice(e,1)[0];n.push(t)}else n.push(t)}return[...n,...[...r].sort((e,t)=>(e.full_name??"")>(t.full_name??"")?1:(t.full_name??"")>(e.full_name??"")?-1:0)]})(e,h,t).map(c),p=g.slice(0,3).map(e=>e.name),b="";switch(g.length){case 3:b=(0,l.Wc)(`${u.bt("{{ first }}, {{ second }}, et {{ last }}", "{{ first }}, {{ second }}, and {{ last }}", "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars", undefined, true)}`,{first:`${p[0]??""}`,second:`${p[1]??""}`,last:`${p[2]??""}`});break;case 2:b=(0,l.Wc)(`${u.bt("{{ first }} et {{ second }}", "{{ first }} and {{ second }}", "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars", undefined, true)}`,{first:`${p[0]??""}`,second:`${p[1]??""}`});break;default:b=p.join(", ")}let m=g.length>3?(0,l.Wc)(`, ${u.nbt(["Collaborateurs : {{ userNames }} et {{ leftCount }} de plus.", "Collaborateurs : {{ userNames }} et {{ leftCount }} de plus."], g.length - 3, "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree", true)}`,{userNames:b,leftCount:`${g.length-3}`}):(0,l.Wc)(`, ${u.bt("Collaborateurs : {{ userNames }}.", "Collaborators: {{ userNames }}.", "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree", undefined, true)}`,{userNames:b});return(0,d.jsx)(a.HE,{accessibilityLabel:m,collaborators:g,size:i?"xs":"sm"})}},875280:function(e,t,i){i.d(t,{F:()=>o,m:()=>a});let s={square:{width:236,height:157},wide:{width:320,height:213}};function o(e){return s["square"===e?"square":"wide"]}function a(e){return o(e).width+16}},964293:function(e,t,i){i.d(t,{Z:()=>d});var s=i(281098),o=i(667294),a=i(20256),r=i(19585),n=i(808141),l=i(785893);function d({boardThumbs:e,isChangeBoardModal:t,isSecret:i,name:d,onNameChange:c,onVisibilityChange:_,submitError:u}){(0,o.useEffect)(()=>{(0,s.Z)("CreateBoard","/app/www/profile/ProfileBoards/BoardlessPins/CreateBoard.tsx")},[]);let h=(0,r.Z)();return(0,l.jsx)(a.xu,{paddingX:8,children:(0,l.jsxs)(a.kC,{direction:"column",gap:{row:0,column:4},children:[e&&!t&&(0,l.jsx)(n.Z,{boardThumbs:e,editButton:null,isActive:!1,isSecret:!1,layout:"square"}),(0,l.jsxs)(a.kC,{direction:"column",gap:{row:0,column:2},children:[(0,l.jsx)(a.xv,{size:"100",children:h.bt("Nom", "Name", "boardlessPins.createBoard.boardNameText", undefined, true)}),(0,l.jsx)(a.nv,{id:"boardName",name:"boardName",onChange:c,placeholder:h.bt("Ajoutez un titre comme « Bricolage » ou « Recettes »", "Add a title, like “DIY” or “Recipes”", "boardlessPins.createBoard.boardNameTextPlaceholder", undefined, true),size:"lg",value:d})]}),(0,l.jsxs)(a.kC,{direction:"column",gap:{row:0,column:2},children:[(0,l.jsx)(a.xv,{size:"100",children:h.bt("Visibilité", "Visibility", "boardlessPins.createBoard.visibilityTitle", undefined, true)}),(0,l.jsxs)(a.kC,{gap:{row:4,column:0},children:[(0,l.jsx)(a.XZ,{checked:i,id:"boardVisibility",name:"boardVisibility",onChange:_}),(0,l.jsxs)(a.kC,{direction:"column",gap:{row:0,column:1},children:[(0,l.jsx)(a.xv,{children:h.bt("Garder ce tableau secret", "Keep this board secret", "boardlessPins.createBoard.visibilityCheckbox", undefined, true)}),(0,l.jsx)(a.xv,{color:"subtle",children:h.bt("Ainsi, vous et vos collaborateurs êtes les seuls à voir ceci.", "So only you and collaborators can see it.", "boardlessPins.createBoard.visibilityCheckboxInfo", undefined, true)})]})]})]}),u&&(0,l.jsx)(a.xv,{color:"error",children:u})]})})}},74105:function(e,t,i){i.d(t,{Z:()=>o});var s=i(536652);function o(e,t,i){return(0,s.U)("BoardResource",{options:{board_id:e,field_set_key:t,...i?{orbac_subject_id:i}:{}}})}},831786:function(e,t,i){i.d(t,{S:()=>h,Z:()=>g});var s=i(575108),o=i(74105),a=i(225013),r=i(189976),n=i(686231),l=i(696323),d=i(697063);let c=e=>t=>{d.Z.showError(function(e,t){switch(e.api_error_code){case 2171:case 2172:case 2173:return t.bt("Veuillez attendre la fin de l’action du tableau précédent.", "Please wait until the previous board action finishes.", " - ", undefined, true);default:return e.message}}(t,e))},_=e=>(0,r.N8)(e.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,e.sectionId||e.boardId);function u(e,t){let{source:i,target:s}=e;s.boardId!==i.boardId?(t((0,o.Z)(i.boardId,"pin_count")),t((0,o.Z)(s.boardId,"pin_count"))):i.sectionId&&s.sectionId||t((0,o.Z)(s.boardId,"pin_count")),i.sectionId&&t((0,a.Z)(i.sectionId)),s.sectionId&&t((0,a.Z)(s.sectionId))}function h(e){return t=>{let{selectedPinIds:i,source:s,target:o}=e;t((0,r.EX)({feedId:s.sectionId||s.boardId,feedType:s.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,itemIds:i,itemType:"pin"})),t((0,r.vX)({feedId:o.sectionId||o.boardId,feedType:o.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,itemIds:i,itemType:"pin"})),i.forEach(e=>{t((0,n.Vp)({pinId:e,boardId:o.boardId,sectionId:o.sectionId||void 0,title:o.name||""}))}),u(e,t)}}function g(e,t){return i=>{let{selectedPinIds:o,target:a}=e;return o.forEach(e=>{i((0,n.Vp)({pinId:e,boardId:a.boardId,sectionId:a.sectionId||void 0,title:a.name||""}))}),(function(e,t,i){let{inverseSelection:o,selectedPinIds:a,source:n,target:d,orbacSubjectId:u}=e;if(n.boardId===d.boardId&&(n.sectionId||null)===(d.sectionId||null))return Promise.reject();if(o){let e={board_id:n.boardId,new_board_id:d.boardId,old_section_id:n.sectionId||void 0,new_section_id:d.sectionId||void 0,pin_ids:a,orbac_subject_id:u};return s.Z.create("BulkEditSelectAllResource",e).callUpdate({showError:!1}).then(()=>Promise.all([t(_(n)),t(_(d))])).catch(c(i))}{let e=(e,i)=>{t((0,r.EX)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,itemIds:a,itemType:"pin"})),t((0,r.vX)({feedId:i.sectionId||i.boardId,feedType:i.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,itemIds:a,itemType:"pin"}))};e(n,d);let o=()=>e(d,n);if(d.boardId===n.boardId)if(d.sectionId){let e={section_id:d.sectionId,pins:a,orbac_subject_id:u};return s.Z.create("BoardSectionEditResource",e).callUpdate({showError:!1}).catch(e=>{o(),c(i)(e)})}else{let e={section_id:n.sectionId,pins:a,orbac_subject_id:u};return s.Z.create("BoardSectionPinsResource",e).callDelete({showError:!1}).catch(e=>{o(),c(i)(e)})}{let e={board_id:d.boardId,section_id:d.sectionId||void 0,pin_ids:a,orbac_subject_id:u};return s.Z.create("BulkEditResource",e).callUpdate({showError:!1}).catch(e=>{o(),c(i)(e)})}}})(e,i,t).then(()=>u(e,i))}}},524558:function(e,t,i){i.d(t,{Z:()=>n});var s=i(281098),o=i(667294),a=i(20256),r=i(785893);function n(e){(0,o.useEffect)(()=>{(0,s.Z)("FocusableSearchField","/app/www/save/board/FocusableSearchField.tsx")},[]);let{accessibilityClearButtonLabel:t,accessibilityLabel:i,focused:n,id:l,onBlur:d,onChange:c,onFocus:_,placeholder:u,value:h,size:g="lg"}=e,p=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(n){let e=p.current;window.requestAnimationFrame(()=>{let t=e&&e.querySelector("input");t instanceof HTMLInputElement&&t.focus()})}},[n]),(0,r.jsx)(a.xu,{ref:p,children:(0,r.jsx)(a.Um,{accessibilityClearButtonLabel:t,accessibilityLabel:i,id:l,onBlur:d,onChange:c,onFocus:_,placeholder:u,size:g,value:h})})}},494904:function(e,t,i){i.d(t,{Z:()=>r});var s=i(20256),o=i(19585),a=i(785893);let r=function({type:e}){let t=(0,o.Z)(),i={group:{accessibilityLabel:t.bt("tableau collaboratif", "group board", "Board picker group board icon", undefined, true),icon:"people"},protected:{accessibilityLabel:t.bt("tableau protégé", "protected board", "Board picker protected board icon", undefined, true),icon:"protect"},secret:{accessibilityLabel:t.bt("Tableau secret", "secret board", "Board picker secret board icon", undefined, true),icon:"lock"},sections:{accessibilityLabel:t.bt("Tableau avec sous-tableaux", "board with sections", "Board picker board with sections icon", undefined, true),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:t.bt("Tableau avec sous-tableaux", "board with sections", "Board picker board with sections icon", undefined, true),icon:"arrow-down"}}[e],r="sections"===e||"sectionsInline"===e;return(0,a.jsx)(s.xu,{marginStart:+!!r,children:(0,a.jsx)(s.xu,{marginStart:2*!!r,children:"sections"===e||"sectionsInline"===e?(0,a.jsx)(s.JO,{accessibilityLabel:i.accessibilityLabel,color:"default",icon:i.icon,size:"12"}):(0,a.jsx)(s.JO,{accessibilityLabel:i.accessibilityLabel,color:"default",icon:i.icon,size:16})})})}},890774:function(e,t,i){i.d(t,{Z:()=>c});var s=i(581722),o=i(782677),a=i(575108),r=i(877956),n=i(440568),l=i(536652),d=i(72918);function c(){let e=(0,s.I0)(),t=(0,s.v9)(e=>e.resources);return async function({boardCreateOptions:i,deprecatedSchemaForNormalization:s}){let c=await a.Z.create("BoardResource",i).callCreate(),_=c.resource_response.data,u=s?(0,o.Fv)(_,s):void 0;e((0,d.XM)("BoardResource",i,c,u)),e((0,r.fO)({event_type:20})),_.owner?.id&&e((0,l.b)("UserResource",{options:{user_id:_.owner.id,field_set_key:"save_behavior"}}));let h=t.BoardsResource||{},g=t.BoardsFeedResource||{};return Object.keys(h).forEach(t=>{(0,n.k)(t).username===_.owner?.username&&e((0,d.jB)("BoardsResource",t))}),Object.keys(g).forEach(t=>{(0,n.k)(t).username===_.owner?.username&&e((0,d.jB)("BoardsFeedResource",t))}),_}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/82519.fr-a8f53af9c36ebce0.mjs.map