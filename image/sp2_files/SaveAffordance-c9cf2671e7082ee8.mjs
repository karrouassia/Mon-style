(self.modernJsonp=self.modernJsonp||[]).push([["64701"],{358276:function(e,o,n){n.r(o),n.d(o,{default:()=>T});var a=n(281098),t=n(667294),i=n(581722),l=n(20256),r=n(890479),s=n(374114),d=n(111330),c=n(355940),p=n(832651),u=n(19585),m=n(956077),v=n(821806),_=n(753143),h=n(572227),b=n(341742),f=n(923924),S=n(542963),k=n(441733),y=n(966838),P=n(373950),x=n(603316),w=n(78762),g=n(785893);let B=(0,w.Z)(()=>n.e("32560").then(n.bind(n,817631)),void 0,e=>817631,"PinSaveButtonCommon",e=>["32560"]),Z=(0,t.lazy)(async()=>({default:(await Promise.all([n.e("82519"),n.e("24660")]).then(n.bind(n,418581))).QuickSaveButtonWithExperienceAnchor})),T=({boardCount:e=0,clientTrackingParams:o,onBoardSelectionFlyoutChange:n,onClickCallback:w,pin:T,showEnabledSaveBehavior:C,showRepinOnInitialRender:A,variant:j,viewParameter:I,viewType:D,saveToBoardFromPostDownloadUpsell:Q,setSaveToBoardFromPostDownloadUpsell:R})=>{(0,t.useEffect)(()=>{(0,a.Z)("SaveAffordance","/app/common/react/components/closeup/CloseupBody/SaveAffordance.tsx")},[]);let{experience:U}=(0,p.Ow)(1000310),{experience:E}=(0,p.Ow)(12),F=(0,h.Z)(),M=(0,i.I0)(),K=(0,u.Z)(),L=(0,t.useRef)(!1),{pins:O,clear:N}=(0,S.Z)(),z=(0,_.M0)().getItem(d.M8)||"",J=z?z===T.id:!!O&&O.length>0&&O[O.length-1].id===T.id,{shouldSeePinBetterSave:W}=(0,k.Z)();(0,b.Z)(()=>{L.current||2!==O.length&&(1!==O.length||J)||(L.current=!0,(2===O.length&&!z&&J?[O[0]]:O).forEach(({id:e,nodeId:o})=>{(0,s.Z)({description:"",entityId:e,link:"",promotedIsRemovable:void 0,title:""},K).then(n=>{let{id:a,url:t,name:i}=n;M((0,y.d)({boardId:a,url:t,title:i||"",pinId:e||"",nodeId:o}))})}),J||N())});let q=()=>{(0,_.M0)().removeItem(d.M8),N(),F({action:"trigger",item:"unauth-save-button-quicksave"}),M((0,P.Z)(!0)),M((0,y.d)({boardId:"",url:"",title:"Profile",pinId:T.id,nodeId:T?.node_id})),M((0,y.X)(T))},H=()=>{(0,m.Nx)("button")};if(T?.pinner?.blocked_by_me||T?.promoted_is_removable)return(0,m.Nx)("button"),null;(0,x.nP)("webapp.closeup.save_button.ad_only_pin.shown",{sampleRate:1,tags:{blocked_by_me:T?.pinner?.blocked_by_me,promoted_is_removable:T?.promoted_is_removable}});let V=()=>{(0,x.nP)("webapp.closeup.save_button.ad_only_pin.clicked",{sampleRate:1,tags:{blocked_by_me:T?.pinner?.blocked_by_me,promoted_is_removable:T?.promoted_is_removable}}),w()};if(!W&&U&&502450===U.experience_id)return(0,g.jsx)(c.Z,{name:"SafeSuspense_SaveAffordance_QuickSaveButton",children:(0,g.jsx)(v.Z,{children:(0,g.jsx)(r.Z,{id:"QuickSaveButtonWithExperienceAnchor",children:(0,g.jsx)(Z,{autoQuicksaveCallback:q,clientTrackingParams:o,experience:U,onClickCallback:V,onMount:H,pinKey:{type:"Legacy",data:T},saveToBoardFromPostDownloadUpsell:Q,setSaveToBoardFromPostDownloadUpsell:R,shouldAutoQuicksave:J,showEnabledSaveBehavior:C,viewParameter:I})})})});let X=!T.content_sensitivity?.is_sensitive_content&&void 0!==e||W,G=[501041],Y=E&&501041===E.experience_id&&E.display_data.has_tooltip?e=>(0,g.jsx)(p.Qp,{anchor:e,experienceIds:G,idealDirection:"down",placementId:12,positionRelativeToAnchor:!0,showCaret:!0}):e=>(0,g.jsx)(p.N,{anchors:{3010:e},idealDirection:"down",onAnchorTouch:"complete",placementId:12,scrollToDismiss:!0});return X?(0,g.jsx)(l.xu,{children:(0,g.jsx)(c.Z,{name:"SafeSuspense_SaveAffordance_PinBetterSave",children:(0,g.jsx)(r.Z,{id:"PinBetterSave",children:(0,g.jsx)(f.default,{autoQuicksaveCallback:q,clientTrackingParams:o,onClickCallback:V,onMount:H,onToggleFlyout:n,pinKey:{type:"Legacy",data:T},renderPinSaveTooltip:Y,saveToBoardFromPostDownloadUpsell:Q,setSaveToBoardFromPostDownloadUpsell:R,shouldAutoQuicksave:J,variant:j,viewParameter:I,viewType:D})})})}):(0,g.jsx)(c.Z,{name:"SafeSuspense_SaveAffordance_PinSaveButton",children:(0,g.jsx)(v.Z,{children:(0,g.jsx)(r.Z,{id:"PinSaveButton",children:(0,g.jsx)(B,{clientTrackingParams:o,isCloseupPin:!0,onClickCallback:V,onMount:H,pinKey:{type:"Legacy",data:T},renderPinSaveTooltip:Y,saveToBoardFromPostDownloadUpsell:Q,setSaveToBoardFromPostDownloadUpsell:R,showRepinOnInitialRender:A})})})})}},373950:function(e,o,n){n.d(o,{Z:()=>a});function a(e){return{type:"UPDATE_HAS_QUICKSAVE_BOARD",payload:{createdQuicksaveBoard:e}}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/SaveAffordance-c9cf2671e7082ee8.mjs.map